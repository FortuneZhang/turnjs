<div id="magazine">
  <div >
    <img src="assets/1.jpg" alt="loading">

  </div>
  <div >
    <img src="assets/2.jpg" alt="loading">
  </div>
  <div >
    <img src="assets/3.jpg" alt="loading">
  </div>
  <div >
    <img src="assets/3.jpg" alt="loading">
  </div>

</div>


<script type="text/javascript">


    var numberOfPages = 1000;


    $(window).ready(function () {

        var screen_height = screen.width;
        var screen_weight = screen.height;

        console.log("screen_height :" + screen_height + "screen_weight :" + screen_weight);

        $('#magazine').turn({
            width: 1152,
            height: 752,
            display: 'double',
            acceleration: true,
            gradients: !$.isTouch,
            elevation: 50,
            when: {
                turning: function (e, page, view) {
                },
                turned: function (e, page) {
                    var current_page = $("#magazine").turn("page");
                    var total_page = $('#magazine').turn("pages");

                    console.log('current_page->' + current_page + 'total_page->' + total_page)
                    if (current_page > total_page - 3) {
                        console.log("if invoke")
                        for (var p = total_page + 1; p < total_page + 4; p += 1)
                            load_pic_before_view(p, $(this))
                    }
                }
            }
        });
    });


    $(window).bind('keydown', function (e) {
        if (e.keyCode == 37)
            $('#magazine').turn('previous');
        else if (e.keyCode == 39)
            $('#magazine').turn('next');
    });


    function load_pic_before_view(page, magazine) {
        if (!magazine.turn('hasPage', page)) {
            var element = $('<div />', {'class': 'page ' + ((page % 2 == 0) ? 'odd' : 'even'), 'id': 'page-' + page}).html('<i class="loader"></i>');

            magazine.turn('addPage', element, page);
            setTimeout(function () {
                element.html('<img src="assets/' +page+ '.jpg" alt="loading" >');
            }, 1000);
        }
    }

</script>